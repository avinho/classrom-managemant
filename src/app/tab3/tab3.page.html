<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title> Alunos </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen>
  <swiper-container
    [modules]="swiperModules"
    (swiperslidechange)="onSlideChange($event)"
  >
    <swiper-slide *ngFor="let student of students; let i=index">
      <ion-card
        style="
          margin-top: 9px;
          border-radius: 10px;
          width: 90%;
          margin-bottom: 2px;
          box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 6px;
        "
      >
        <ion-card-content style="padding: 0">
          <ion-list>
            <ion-item>
              <ion-icon name="person"></ion-icon>
              <ion-label style="margin-left: 10px"
                >{{ student.name }}</ion-label
              >
            </ion-item>
            <ion-item>
              <ion-icon name="calendar-number"></ion-icon>
              <ion-label style="margin-left: 10px">{{student.age}}</ion-label>
            </ion-item>
            <ion-item lines="none">
              <ion-icon name="school"></ion-icon>
              <ion-label style="margin-left: 10px">{{student.class}}</ion-label>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>
    </swiper-slide>
  </swiper-container>

  <ion-list
    lines="inset"
    style="
      height: 6vh;
      padding-left: 15px;
      padding-top: 0;
      padding-bottom: 0;
      --ion-item-background: transparent;
    "
  >
    <div class="select-wrapper">
      <ion-icon name="book" style="margin-right: 5px"></ion-icon>
      <ion-select
        placeholder="Select a book"
        (ionChange)="onBookChange($event.detail.value)"
        [value]="selectedBook"
        interface="popover"
      >
        <ion-select-option *ngFor="let book of books" [value]="book"
          >{{ book.book }}</ion-select-option
        >
      </ion-select>
    </div>
  </ion-list>

  <ion-card
    style="
      margin-top: 0;
      border-radius: 10px;
      height: 54vh;
      box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
    "
    *ngIf="selectedBook"
  >
    <cdk-virtual-scroll-viewport itemSize="{{ selectedBook.lessons.length }}">
      <ion-list
        *cdkVirtualFor="let lesson of selectedBook.lessons"
        class="ion-content-scroll-host"
      >
        <ion-list-header
          lines="full"
          style="font-weight: bold; font-size: 16px"
        >
          <ion-label>{{ lesson.lesson}}</ion-label>
        </ion-list-header>
        <ion-item *ngFor="let topic of lesson.topics">
          <ion-toggle
            [enableOnOffLabels]="true"
            (ionChange)="onTopicChange(topic)"
            mode="md"
            size="small"
            >{{ topic.topic }}
          </ion-toggle>
        </ion-item>
      </ion-list>
    </cdk-virtual-scroll-viewport>
  </ion-card>
</ion-content>
